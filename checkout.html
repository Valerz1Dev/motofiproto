<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kassa â€“ MOTOFI</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[url('https://i.imgur.com/Q2ZgCbO.jpeg')] bg-cover bg-center bg-fixed bg-no-repeat">

  <!-- Overlay background -->
  <div class="backdrop-blur-sm bg-white/80 min-h-screen flex flex-col justify-between">

    <!-- Header -->
    <header class="bg-black text-white p-4">
      <div class="container mx-auto flex justify-between items-center">
        <h1 class="text-2xl font-bold">MOTOFI</h1>
        <a href="ostoskori.html" class="relative">
          Kauppa
          <span class="absolute -top-2 -right-4 bg-red-600 text-white text-xs rounded-full px-2">ðŸ›’</span>
        </a>
      </div>
    </header>

    <!-- Checkout Form Section -->
    <main class="flex flex-col items-center justify-center px-4 py-10 grow">
      <div class="bg-white rounded-lg shadow-md max-w-6xl w-full grid grid-cols-1 md:grid-cols-2 overflow-hidden">
        <!-- Customer Form -->
        <div class="p-8">
          <h2 class="text-2xl font-bold mb-6">Asiakastiedot</h2>
          <form id="checkout-form" action="https://formspree.io/f/your-form-id" method="POST" class="space-y-4">
            <input type="hidden" name="_next" value="kiitos.html" />
            <input type="hidden" name="Tilaus" id="order-summary" />
            
            <input type="text" name="Nimi" required placeholder="Nimi" class="w-full border px-3 py-2 rounded" />
            <input type="email" name="SÃ¤hkÃ¶posti" required placeholder="SÃ¤hkÃ¶posti" class="w-full border px-3 py-2 rounded" />
            <input type="text" name="Osoite" required placeholder="Osoite" class="w-full border px-3 py-2 rounded" />
            <input type="text" name="Postinumero" required placeholder="Postinumero" class="w-full border px-3 py-2 rounded" />
            <input type="text" name="Postitoimipaikka" required placeholder="Postitoimipaikka" class="w-full border px-3 py-2 rounded" />
            <input type="text" name="Puhelin" placeholder="Puhelin (valinnainen)" class="w-full border px-3 py-2 rounded" />

            <button type="submit" class="w-full bg-green-600 text-white py-2 rounded hover:bg-green-700">Tilaa nyt</button>
          </form>
        </div>

        <!-- Order Summary -->
        <div class="bg-gray-50 p-8 border-l">
          <h2 class="text-2xl font-bold mb-6">Yhteenveto</h2>
          <div id="summary-content" class="text-sm space-y-2"></div>
          <div class="mt-6 font-semibold text-lg" id="grand-total"></div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="bg-black text-white text-center text-sm py-4">
      Â© 2025 MOTOFI. Kaikki oikeudet pidÃ¤tetÃ¤Ã¤n.
    </footer>

  </div>

  <script>
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const summary = document.getElementById('summary-content');
    const totalEl = document.getElementById('grand-total');
    const hiddenField = document.getElementById('order-summary');

    let subtotal = 0;
    let summaryHTML = '';
    let orderText = '';

    cart.forEach(item => {
      const lineTotal = item.price * item.qty;
      subtotal += lineTotal;
      summaryHTML += `<div class="flex justify-between"><span>${item.name} Ã— ${item.qty}</span><span>${lineTotal.toFixed(2)}â‚¬</span></div>`;
      orderText += `${item.name} x ${item.qty} â€“ ${lineTotal.toFixed(2)}â‚¬\n`;
    });

    const shipping = 6.90;
    const tax = subtotal * 0.24;
    const total = subtotal + shipping;

    summaryHTML += `
      <hr class="my-4" />
      <div class="flex justify-between"><span>VÃ¤lisumma:</span><span>${subtotal.toFixed(2)}â‚¬</span></div>
      <div class="flex justify-between"><span>Toimitus:</span><span>${shipping.toFixed(2)}â‚¬</span></div>
      <div class="flex justify-between"><span>ALV 24%:</span><span>${tax.toFixed(2)}â‚¬</span></div>
    `;

    summary.innerHTML = summaryHTML;
    totalEl.textContent = `YhteensÃ¤: ${total.toFixed(2)}â‚¬`;

    orderText += `\nToimitus: ${shipping.toFixed(2)}â‚¬\nALV: ${tax.toFixed(2)}â‚¬\nYhteensÃ¤: ${total.toFixed(2)}â‚¬`;
    hiddenField.value = orderText;

    document.getElementById('checkout-form').addEventListener('submit', () => {
      localStorage.removeItem('cart'); // Clear cart on submit
    });
  </script>
</body>
</html>
